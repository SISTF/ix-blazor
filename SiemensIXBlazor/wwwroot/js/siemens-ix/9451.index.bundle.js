"use strict";(self.webpackChunknpmjs=self.webpackChunknpmjs||[]).push([[9451],{9451:(e,t,s)=>{s.r(t),s.d(t,{ix_dropdown:()=>h});var i=s(6074),r=s(5297);function o(e){return void 0!==e.getDropdownItemElement&&"function"==typeof e.getDropdownItemElement}const n=new class{constructor(){this.dropdowns=new Map,this.submenuIds={},this.isWindowListenerActive=!1}connected(e){this.isWindowListenerActive||this.addOverlayListeners(),this.dropdowns.set(e.getId(),e),e.discoverAllSubmenus&&this.discoverSubmenus()}disconnected(e){this.dropdowns.delete(e.getId())}discoverSubmenus(){this.dropdowns.forEach((e=>{e.discoverSubmenu()}))}present(e){!e.isPresent()&&e.willPresent()&&(this.submenuIds[e.getId()]=e.getAssignedSubmenuIds(),e.present())}dismissChildren(e){const t=this.submenuIds[e]||[];for(const e of t)this.dismiss(this.dropdowns.get(e))}dismiss(e){e.isPresent()&&e.willDismiss()&&(this.dismissChildren(e.getId()),e.dismiss(),delete this.submenuIds[e.getId()])}dismissAll(e){this.dropdowns.forEach((t=>{((null==e?void 0:e.includes(t.getId()))||"inside"!==t.closeBehavior&&!1!==t.closeBehavior)&&this.dismiss(t)}))}dismissOthers(e){let t=this.buildComposedPath(e,new Set);this.dropdowns.forEach((e=>{e.isPresent()&&"inside"!==e.closeBehavior&&!1!==e.closeBehavior&&!t.has(e.getId())&&this.dismiss(e)}))}pathIncludesTrigger(e){return!!e.find((e=>{var t;return!!(null===(t=e.hasAttribute)||void 0===t?void 0:t.call(e,"data-ix-dropdown-trigger"))}))}pathIncludesDropdown(e){return!!e.find((e=>"IX-DROPDOWN"===e.tagName))}buildComposedPath(e,t){this.submenuIds[e]&&t.add(e);for(const s of Object.keys(this.submenuIds))this.submenuIds[s].includes(e)&&this.buildComposedPath(s,t).forEach((e=>t.add(e)));return t}addOverlayListeners(){this.isWindowListenerActive=!0,window.addEventListener("click",(e=>{const t=this.pathIncludesTrigger(e.composedPath()),s=this.pathIncludesDropdown(e.composedPath());t||s||this.dismissAll()})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&this.dismissAll([...this.dropdowns.keys()])}))}};let d=0;const h=class{constructor(e){(0,i.r)(this,e),this.showChanged=(0,i.c)(this,"showChanged",7),this.autoUpdateCleanup=null,this.localUId="dropdown-"+d++,this.assignedSubmenu=[],this.suppressAutomaticPlacement=!1,this.show=!1,this.trigger=void 0,this.anchor=void 0,this.closeBehavior="both",this.placement="bottom-start",this.positioningStrategy="fixed",this.header=void 0,this.offset=void 0,this.overwriteDropdownStyle=void 0,this.discoverAllSubmenus=!1}connectedCallback(){n.connected(this)}cacheSubmenuId(e){e.stopImmediatePropagation(),e.preventDefault();const{detail:t}=e;-1===this.assignedSubmenu.indexOf(t)&&this.assignedSubmenu.push(t)}disconnectedCallback(){var e;null===(e=this.disposeListener)||void 0===e||e.call(this),n.disconnected(this),this.autoUpdateCleanup&&this.autoUpdateCleanup()}getAssignedSubmenuIds(){return this.assignedSubmenu}isPresent(){return this.show}present(){this.show=!0}dismiss(){this.show=!1}getId(){return this.localUId}willDismiss(){const{defaultPrevented:e}=this.showChanged.emit(!1);return!e}willPresent(){const{defaultPrevented:e}=this.showChanged.emit(!0);return!e}get dropdownItems(){return Array.from(this.hostElement.querySelectorAll("ix-dropdown-item"))}get slotElement(){return this.hostElement.shadowRoot.querySelector("slot")}addEventListenersFor(){var e;null===(e=this.disposeListener)||void 0===e||e.call(this);const t=()=>{this.isPresent()?n.dismiss(this):n.present(this),n.dismissOthers(this.getId())};var s,i,r;this.disposeListener=(s=this.triggerElement,i="click",r=e=>{e.defaultPrevented||t()},s.addEventListener(i,r),()=>{s.removeEventListener(i,r)}),this.triggerElement.setAttribute("data-ix-dropdown-trigger",this.localUId)}async discoverSubmenu(){var e;null===(e=this.triggerElement)||void 0===e||e.dispatchEvent(new CustomEvent("ix-assign-sub-menu",{bubbles:!0,composed:!1,cancelable:!0,detail:this.localUId}))}async registerListener(e){this.triggerElement=await this.resolveElement(e),this.triggerElement&&(this.addEventListenersFor(),this.discoverSubmenu())}async resolveElement(e){const t=await this.findElement(e);return this.checkForSubmenuAnchor(t)}async checkForSubmenuAnchor(e){if(o(e)){const t=await e.getDropdownItemElement();return t.isSubMenu=!0,this.hostElement.style.zIndex="var(--theme-z-index-dropdown)",t}return"IX-DROPDOWN-ITEM"===e.tagName&&(e.isSubMenu=!0,this.hostElement.style.zIndex="var(--theme-z-index-dropdown)"),e}findElement(e){if(e instanceof Promise)return e;if("object"==typeof e)return Promise.resolve(e);const t=`#${e}`;return new Promise((e=>{if(document.querySelector(t))return e(document.querySelector(t));const s=new MutationObserver((()=>{document.querySelector(t)&&(e(document.querySelector(t)),s.disconnect())}));s.observe(document.body,{childList:!0,subtree:!0})}))}async changedShow(e){e&&(this.anchorElement=await(this.anchor?this.resolveElement(this.anchor):this.resolveElement(this.trigger)),this.anchorElement&&this.applyDropdownPosition())}changedTrigger(e){this.registerListener(e)}isAnchorSubmenu(){var e;return!!o(this.anchorElement)||!!(null===(e=this.anchorElement)||void 0===e?void 0:e.closest("ix-dropdown-item"))}async applyDropdownPosition(){if(!this.anchorElement)return;if(!this.dropdownRef)return;const e=this.isAnchorSubmenu();let t={strategy:this.positioningStrategy,middleware:[]};this.suppressAutomaticPlacement||t.middleware.push((0,r.f)({fallbackStrategy:"initialPlacement"})),t.placement=e?"right-start":this.placement,t.middleware=[...t.middleware,(0,r.i)(),(0,r.s)()],this.offset&&t.middleware.push((0,r.o)(this.offset)),this.autoUpdateCleanup&&(this.autoUpdateCleanup(),this.autoUpdateCleanup=null),this.autoUpdateCleanup=(0,r.a)(this.anchorElement,this.dropdownRef,(async()=>{const e=await(0,r.c)(this.anchorElement,this.dropdownRef,t);if(Object.assign(this.dropdownRef.style,{top:"0",left:"0",transform:`translate(${Math.round(e.x)}px,${Math.round(e.y)}px)`}),this.overwriteDropdownStyle){const e=await this.overwriteDropdownStyle({dropdownRef:this.dropdownRef,triggerRef:this.triggerElement});Object.assign(this.dropdownRef.style,e)}}),{ancestorResize:!0,ancestorScroll:!0,elementResize:!0})}async componentDidLoad(){this.changedTrigger(this.trigger)}async componentDidRender(){await this.applyDropdownPosition(),this.anchorElement=await(this.anchor?this.resolveElement(this.anchor):this.resolveElement(this.trigger))}isTriggerElement(e){return!!e.hasAttribute("data-ix-dropdown-trigger")}onDropdownClick(e){n.pathIncludesTrigger(e.composedPath())&&(e.preventDefault(),this.isTriggerElement(e.target))||("inside"!==this.closeBehavior&&"both"!==this.closeBehavior||n.dismissAll([this.getId()]),n.dismissOthers(this.getId()))}async updatePosition(){this.applyDropdownPosition()}render(){return(0,i.h)(i.H,{key:"6747db1bc7c303781400a3ede0635fc84a32d61b","data-ix-dropdown":this.localUId,ref:e=>this.dropdownRef=e,class:{"dropdown-menu":!0,show:this.show,overflow:!0},style:{margin:"0",minWidth:"0px",position:this.positioningStrategy},role:"list",onClick:e=>this.onDropdownClick(e)},(0,i.h)("div",{key:"3407be8208d5fb220b80744afb9a5aa938b4b658",style:{display:"contents"}},this.header&&(0,i.h)("div",{class:"dropdown-header"},this.header),(0,i.h)("slot",{key:"48df3c460330d7ef698b1624d93ad548e95902d0"})))}get hostElement(){return(0,i.g)(this)}static get watchers(){return{show:["changedShow"],trigger:["changedTrigger"]}}};h.style=":host{background-color:var(--theme-color-2);border-radius:var(--theme-default-border-radius);min-width:0px;z-index:var(--theme-z-index-dropdown);box-shadow:var(--theme-shadow-4);padding:0.25rem 0px}:host *,:host *::after,:host *::before{box-sizing:border-box}:host ::-webkit-scrollbar-button{display:none}:host ::-webkit-scrollbar{width:0.5rem;height:0.5rem}:host ::-webkit-scrollbar-track{border-radius:5px;background:var(--theme-scrollbar-track--background)}:host ::-webkit-scrollbar-track:hover{background:var(--theme-scrollbar-track--background--hover)}:host ::-webkit-scrollbar-thumb{border-radius:5px;background:var(--theme-scrollbar-thumb--background)}:host ::-webkit-scrollbar-thumb:hover{background:var(--theme-scrollbar-thumb--background--hover)}:host ::-webkit-scrollbar-corner{display:none}:host .dropdown-header{display:flex;align-items:center;height:2.5rem;color:var(--theme-menu-header--color);padding:0 1rem}:host(.overflow){max-height:50vh;overflow-y:auto}:host(:not(.show)){display:none}"}}]);